---
id: data
title: Data
---

This page is used to configure the data that will be handled by your mobile app. It allows you to:

* select the data source to include in your app (**Current data file** or **Production server data file**) and configure when to regenerate it,
* filter data to vizualize in your app depending on **general filter queries** and **user information**. 

![Data section](img/Data-tab-4D-for-iOS.png)

## Data source

This panel allows you to configure the data to embed in your app (if any).

### Data file

Select the data file from which to get the data that will be embedded in your app:

- **Current data file**: the data is taken from the current data file of the 4D project. This option is useful in the development phase. Since it requires that the Web server is launched, a **Start Web Server** button is displayed if it is not running.  

- **Production server data file**: the data is taken from a production server running the 4D project over the network. The **Production URL** must be entered from the [**Publishing** page](publishing.md) if you choose this option. If not defined, you can click on the **Set the Server URL** button to open the Publishing page. This option requires that you select explicitely the `key.mobileapp` security file (see below). 

### Selecting the `key.mobileapp` file

To secure access to the data to include, a `key.mobileapp` file is automatically generated by the 4D mobile editor in the **MobileApps** folder when the data file is selected. This key must be correctly installed to allow data dumping. It is required when:

- the app is [built](build.md)
- you click on the [**Regenerate now**](#regenerate-now) button.

:::info

The **MobileApps** folder is automatically created in the 4D project's [data folder](https://developer.4d.com/docs/en/Project/architecture.html#data-folder). 

::: 

When you work with the **Current data file**, the `key.mobileapp` file is automatically selected in the data folder of the local project.

When you work with the **Production server data file**, you need to copy from the server and select the remote `key.mobileapp` file:

1. On the production server machine, copy the `key.mobileapp` file from the `/Data/MobileApps` folder of the server application project.

2. In the mobile project editor, click on the **Locate the key...** button:
![Data section](img/locateKey.png)

3. Select the `key.mobileapp` file copied from the server.

It is recommended to copy the file in the `/Data/MobileApps` folder of the local project.

:::info

This key is only necessary to access data to be embedded in the app. Subsequent accesses to server data from the apps are [authenticated at the request level](publishing.md/authentication). 

:::

### Do not include images

Embedding images from the data in your app can be time consuming, especially in the development phase. Checking this option can save a considerable amount of time when building your app.

### Do not regenerate data at each build

By defaut, each time you build your app, data are regenerated from the data file. In the development phase, you can save time by selecting this option. 

### Regenerate Now

This button regenerates the data to embed from the data file. It allows you to control the data generation during the development phase, specially when the **Do not regenerate data at each build** is checked. 

:::note

This button requires a valid `key.mobileapp` file if you use the [production server data file](#data-file). 

::: 



## Properties

![Data section](img/Properties-Panel-4D-for-iOS.png)

In this area, you can define **filter queries** for each table. Filter queries are automatically applied to data when embedded, in order to only include a selection of records.   

By default, if you do not define a filter query for a table, all of its records are embedded. 


### Tables

You can define one filter query per table. This list allows you to:

- select the table for which you want to add or edit a filter query
- see the size of embedded data (available for static queries only)
- see if the table is associated to a filter query ![filter](img/query-static.png) or a filter query with user information ![filter-user](img/query-user.png).


### Filter queries

You can define one filter query per table. When a table is selected, enter your query in the **Filter quey** area. When the area is selected, a set of menus is displayed above the area:

![filter-buttons](img/query-buttons.png).

To define a query:

1. Enter your query in the dedicated field by typing it directly in the query area or using the **Fields**, **Comparators** and **Operators** menus. 

A query uses the following syntax:

```
field comparator value   
    {logicalOperator field comparator value}   
    ...
```
Refer to [this paragraph] to know how to build query. 

2. Validate your query by clicking on the **Validate** button. This must be done each time you modify it (a query that has been edited and not validated appears in red in the query editor).

3. Check the **Embed the data from this table into application** option to embed the data into the application when it's built. Leave unchecked if you don't want the data embedded.

When a query filter is valid, an icon appears near the table name.  

#### Example

If you select a table that contains a `FirstName` and a `LastName` field, you can write in the **Filter query**:

```4d
FirstName = 'Lisa' & LastName = 'Hart'
```

This query embeds only the records that include "Lisa" as FirstName and "Hart" as LastName.


### Filter queries with user information

You can define filter queries where the *value* parameter depends on user information that is returned by the `Mobile App Authentication` database method from the 4D project. 

For example, you can define a filter query such as:

```
employee.salary > :email 

```


* As with query filters, you first need to define your query in the appropriate field.

* To specify that the query depends on user information, just add ":" and the `userinfo` object key.

* Then, validate your query. This must be done each time you modify it.

* Once your query filter is validated, a button appears to allow you to add information about users in the [On Mobile App Authentication](http://doc.4d.com/4Dv17R3/4D/17-R3/On-Mobile-App-Authentication-database-method.301-3906587.en.html) method.

When a query filter is valid, a user icon appears to indicate that the defined filter is based on user information.

> **EXAMPLE**
>
> In the **Filter query** field enter:
>
> CityName = :city
>
> In the [On Mobile App Authentication](http://doc.4d.com/4Dv17R3/4D/17-R3/On-Mobile-App-Authentication-database-method.301-3906587.en.html) database method, enter:
>
> ```$response.userInfo:=New object("city";"Paris")```
>
>This query allows you to display only the records which include "Paris" as CityName.


> **NOTE**
>
>You'll find all the rules about query syntax in the [4D documentation](http://livedoc.4d.com/4D-Language-Reference-17-R3/ORDA-DataClass/dataClassquery.301-3907505.en.html).


attributePath|formula comparator value   
    {logicalOperator attributePath|formula comparator value}   
    {order by attributePath {desc | asc}}

